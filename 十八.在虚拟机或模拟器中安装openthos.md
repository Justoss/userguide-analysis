# 在虚拟机中安装openthos   
## qemu 虚拟机安装

 1. 下载iso镜像

  - 创建虚拟磁盘：  
    `qemu-img create a.raw +20G`  
  - 手动格式化磁盘：  
    parted a.raw  
        `mklabel msdos`  
        `mkpart p ext4 1 20G`  
        `quit`
  - 启动虚拟机，默认从cdrom启动：  
    `qemu-system-x86_64 -hda a.raw -enable-kvm -m 2048 -cdrom you-download.iso -boot once=d`  
    启动后选择安装…… 选择第一个安装grub，第二个安装grub2选择skip，其它随意
  - 安装后直接虚拟硬盘启动：
    `qemu-system-x86_64 -hda a.raw -enable-kvm -m 2048 -vga cirrus`

## vmware 虚拟机安装

### 方法一、网盘直接下载，解压使用
  1. 百度网盘下载压缩包
```  
链接: https://pan.baidu.com/s/1miqSiak 
密码: e6js
```  
  2. 解压使用

### 方法二、自己创建虚拟机
  1. 下载img镜像
  2. 转换镜像格式
      qemu-img  convert  -f raw -O vmdk  ./（镜像名字）.img  ./（镜像名字）.img.vmdk
  3. 创建一个虚拟机，向导界面的部分选择如下：   
     配置类型：典型   
     安装来源：稍后安装操作系统   
     客户机操作系统：其他   
     版本：其他64位   
        
  4. 创建完成后，打开“编辑虚拟机设置”，需要更改的设置如下：   
     内存：2048MB   
     处理器数量：2   
  5. Display选项，勾选“Accelerate 3D graphic”   
     (若vmware出现“No 3D graphic ...” 错误，可编辑虚拟机文件vmx，加入一行： mks.gl.allowBlacklistedDrivers = "TRUE")   
     ![](pic/anzhuang/vmware3d.png)   
     
  6. VMware机器设置中，选择“Options“ --> "Advanced"， 勾选"Boot with EFI instead of BIOS";   
     （如没有该选项，可编辑虚拟机文件vmx，加入一行：firmware = "efi" ）    
     ![](pic/anzhuang/vmwareboot.png)     
        
     设置完成后如下图   
     ![](pic/anzhuang/vmware.png)   
  7. 点击设置界面的“添加”按钮，添加一个硬盘挂载vmdk
      ![](pic/anzhuang/hardware.png)
      ![](pic/anzhuang/disk.png)
      ![](pic/anzhuang/selectdisk.png)
      ![](pic/anzhuang/keepfmt.png)
  
  8. 启动后F2安装到硬盘
  9. 调整分辨率
     - vi /system/build.prop
     - 添加：debug.drm.mode.force=1920x1080@60
  10. 重启
